var local=!1;if(void 0===userId)var userId="8152976493";if(void 0===userServer)var userServer="netease";if(void 0===userType)var userType="playlist";function loadMusicScript(){var e;"undefined"!=typeof localMusic&&Array.isArray(localMusic)&&0!==localMusic.length?((e=document.createElement("script")).src="./js/localEngine.min.js",document.body.appendChild(e),local=!0):((e=document.createElement("script")).src="./js/Meting2.min.js",document.body.appendChild(e))}"undefined"!=typeof remoteMusic&&remoteMusic?fetch(remoteMusic).then((e=>e.json())).then((e=>{Array.isArray(e)&&(localMusic=e),loadMusicScript()})).catch((e=>{loadMusicScript()})):loadMusicScript();var volume=.8;const params=new URLSearchParams(window.location.search);var heo={changeMusicBg:function(e=!0){const t=document.getElementById("music_bg");if(e){const e=document.querySelector("#heoMusic-page .aplayer-pic");var o=new Image;o.src=extractValue(e.style.backgroundImage),o.onload=function(){t.style.backgroundImage=e.style.backgroundImage}}else{let e=setInterval((()=>{document.querySelector("#heoMusic-page .aplayer-pic")&&(clearInterval(e),local?ap.volume(.8,!0):document.querySelector("meting-js").aplayer.volume(.8,!0),heo.addEventListenerChangeMusicBg())}),100)}},addEventListenerChangeMusicBg:function(){const e=document.getElementById("heoMusic-page");local?ap.on("loadeddata",(function(){heo.changeMusicBg()})):e.querySelector("meting-js").aplayer.on("loadeddata",(function(){heo.changeMusicBg()}))},getCustomPlayList:function(){const e=document.getElementById("heoMusic-page"),t=params.get("type")||"playlist";if(params.get("id")&&params.get("server")){var o=params.get("id"),a=params.get("server");e.innerHTML=`<meting-js id="${o}" server="${a}" type="${t}" mutex="true" preload="auto" order="random"></meting-js>`}else e.innerHTML=`<meting-js id="${userId}" server="${userServer}" type="${userType}" mutex="true" preload="auto" order="random"></meting-js>`;heo.changeMusicBg(!1)}};heo.getCustomPlayList();const vh=1*window.innerHeight;function extractValue(e){return/\("([^\s]+)"\)/g.exec(e)[1]}document.documentElement.style.setProperty("--vh",`${vh}px`),window.addEventListener("resize",(()=>{let e=1*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`)})),document.addEventListener("keydown",(function(e){"Space"===e.code&&(e.preventDefault(),local?ap.toggle():document.querySelector("meting-js").aplayer.toggle()),39===e.keyCode&&(e.preventDefault(),local?ap.skipForward():document.querySelector("meting-js").aplayer.skipForward()),37===e.keyCode&&(e.preventDefault(),local?ap.skipBack():document.querySelector("meting-js").aplayer.skipBack()),38===e.keyCode&&volume<=1&&(volume+=.1,local?ap.volume(volume,!0):document.querySelector("meting-js").aplayer.volume(volume,!0)),40===e.keyCode&&volume>=0&&(volume+=-.1,local?ap.volume(volume,!0):document.querySelector("meting-js").aplayer.volume(volume,!0))}));